
<!DOCTYPE html> 

<html>
    <head>
        <title>
            ECMAScript2015 let/const
        </title>
    </head>
    <body>
        <h1>페이지 소스 보기</h1>


        <script>

            // 전통적인 변수 선언 방식 var
            var userName = "김은비";
            var age = 23;
            var price = 5000;
            var isMale = false;
            
            // 기본 배송비
            // 정책: 기본 배송비는 한 번 할당/설정해주면 변경되면 안된다
            var baseDelyFee = 3000;
            console.log('기본 배송비1: ', baseDelyFee);
            
            // 기본 배송비 변경
            baseDelyFee = 13000;

            // 전통적인 var 변수 선언 방식은 상수(한 번 할당하면 변경 불가) 개념을 지원하지 않는다
            // 언제든지 변경 가능
            console.log('기본 배송비2: ', baseDelyFee);

            // 2015년도 신규 문법인 상수
            const newBaseDelyFee = 5000;

            console.log('상수 기본배송비: ', newBaseDelyFee);

            // 상수 값 변경
            // 상수 값을 변경하려하면 에러 발생
            // newBaseDelyFee = 10000;

            // 총 결제 금액 초기값 할당
            // let으로 선언된 변수는 초기 할당 이후 변수값을 변경이 가능 = var
            let totalPayPrice = 0;

            console.log('총결제금액: ', totalPayPrice, newBaseDelyFee);

            // let으로 선언된 변수 값 변경
            totalPayPrice = 1;

            console.log('총결제금액: ', totalPayPrice);

            // var 변수 선언 방식은 블록스코프 개념이 없어서
            // 특정 블록 안에서 선언된 변수 값을 블록범위 밖에서 언제든지 변경 가능
            // 이런 var 변수 선언 방식은 다양한 문제 초래

            // 총결제금액에 기본 배송비 추가
            totalPayPrice += baseDelyFee;

            // 총결제금액에 기본 상품 가격 추가
            totalPayPrice += price;

            console.log('총결제 비용: ', totalPayPrice);

            // 가정문을 통한 블록스코프 정의
            if(isMale == true){
                // 상기 조건에 해당하는 현재 범위를 블록스코프라 함
                // 프로그래밍적으로 특정 범위내(블록스코프)에서 선언된 변수나 상수는
                // 해당 범위 내에서만 사용되어야 하고 변경이 되어야 함
                var msg = "남성입니다";
                console.log('현재 사용자는 성별: ', msg);

            }
            
            msg = '여성입니다.';
            console.log('현재 사용자 성별 가정문 밖에서의 값: ', msg);

            // var는 위와 같이 블록스코프 개념 준수가 안되지만
            // 이를 개선하기 위해 let, const는 블록스코프 개념을 준수하고
            // 위배시 에러를 발생시킴

            const region = '제주도';

            if (region == '제주도'){
                const addDelyFee = 2000;
                let addMsg = '도서 배송비가 추가되었습니다.';
                console.log(addMsg);

                totalPayPrice += addDelyFee;
                console.log('if 블록스코프내에서 선언된 변수/상수는 그 안에서 사용이 가능', addDelyFee, totalPayPrice);
            }
            
            // 특정 블록스코프 내에서 선언된 let, const 값은 범위 밖에서 사용 시 에러 발생
            // 블록스코프내에서 선언된 let, const 값은 그 안에서만 사용 및 변경이 가능
            console.log('if구문 내에서 정의된 변수', addMsg);
            console.log('if구문 내에서 정의된 상수', addDelyFee);


        </script>


    </body>
</html>